<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Find the Button VR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- A-Frame (WebVR/WebXR framework) -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="game.js" defer></script>
</head>
<body>
  <!-- A-Frame scene -->
  <a-scene>
    <!-- Camera + cursor (for clicking with gaze or controller) -->
    <a-entity id="rig" position="0 1.6 0">
      <a-entity
        camera
        look-controls
        wasd-controls
        position="0 0 0"
      >
        <a-entity
          cursor="fuse: false; rayOrigin: mouse"
          raycaster="objects: .clickable"
          position="0 0 -1"
          geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02"
          material="color: white; shader: flat"
        ></a-entity>
      </a-entity>
    </a-entity>

    <!-- Map 1 -->
    <a-entity id="map1">
      <a-plane rotation="-90 0 0" width="20" height="20" color="#4CAF50"></a-plane>
      <a-box position="0 1 -3" depth="1" height="2" width="4" color="#555"></a-box>

      <!-- Hidden button on Map 1 -->
      <a-box id="button1"
             class="clickable"
             position="1 1 -2.5"
             depth="0.2" height="0.2" width="0.2"
             color="#FF5722">
      </a-box>
    </a-entity>

    <!-- Map 2 -->
    <a-entity id="map2" visible="false">
      <a-plane rotation="-90 0 0" width="20" height="20" color="#607D8B"></a-plane>
      <a-box position="-2 1 -4" depth="2" height="2" width="2" color="#3F51B5"></a-box>
      <a-box position="2 1 -6" depth="2" height="2" width="2" color="#9C27B0"></a-box>

      <!-- Hidden button on Map 2 -->
      <a-sphere id="button2"
                class="clickable"
                position="-1 1 -3.5"
                radius="0.15"
                color="#FFC107">
      </a-sphere>
    </a-entity>

    <!-- Map 3 (Intense Button Randomization) -->
    <a-entity id="map3" visible="false">
      <a-plane rotation="-90 0 0" width="20" height="20" color="#FF9800"></a-plane>
      <!-- Multiple buttons with random positions -->
      <a-box id="button3"
             class="clickable"
             position="random"
             depth="0.2" height="0.2" width="0.2"
             color="#E91E63">
      </a-box>
      <a-sphere id="button4"
                class="clickable"
                position="random"
                radius="0.15"
                color="#3F51B5">
      </a-sphere>
      <a-cylinder id="button5"
                  class="clickable"
                  position="random"
                  radius="0.15" height="0.3"
                  color="#FFEB3B">
      </a-cylinder>
      <a-box id="button6"
             class="clickable"
             position="random"
             depth="0.2" height="0.2" width="0.2"
             color="#009688">
      </a-box>
      <a-sphere id="button7"
                class="clickable"
                position="random"
                radius="0.15"
                color="#8BC34A">
      </a-sphere>
    </a-entity>

    <!-- UI: text feedback + map label -->
    <a-entity
      id="uiText"
      text="value: Find the button!; align: center"
      position="0 2.2 -2">
    </a-entity>

    <a-entity
      id="mapLabel"
      text="value: Map 1; align: center"
      position="0 2 -2">
    </a-entity>

    <!-- Sky -->
    <a-sky color="#222"></a-sky>

    <!-- WebXR / VR support -->
    <a-entity webxr="optionalFeatures: tracking-unbounded"></a-entity>
  </a-scene>

  <script>
    // Random position function for buttons
    function getRandomPosition() {
      const x = (Math.random() - 0.5) * 10;  // Random between -5 and 5
      const y = Math.random() * 3 + 1;       // Random between 1 and 4
      const z = (Math.random() - 0.5) * 10;  // Random between -5 and 5
      return `${x} ${y} ${z}`;
    }

    // Apply random positions to buttons in Map 3
    document.querySelectorAll('#map3 .clickable').forEach(button => {
      button.setAttribute('position', getRandomPosition());
    });
  </script>
</body>
</html>
